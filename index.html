<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>History and a Day Quiz</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables for better maintainability */
        :root {
            --primary-color: #1abc9c; /* Teal */
            --secondary-color: #e67e22; /* Carrot Orange */
            --dark-blue: #34495e; /* Wet Asphalt */
            --light-gray: #f5f5f5;
            --medium-gray: #ecf0f1;
            --white: #ffffff;
            --text-dark: #333;

            /* Category Colors */
            --cat1-bg: #a3d5ff; /* Light Blue */
            --cat2-bg: #ffb3c1; /* Light Pink */
            --cat3-bg: #fff5b7; /* Light Yellow */
            --cat4-bg: #c1ffd7; /* Light Green */
            --cat5-bg: #d9b3ff; /* Light Purple */

            /* Level Colors */
            --easy-color: #2ecc71; /* Emerald Green */
            --medium-color: #f1c40f; /* Sunflower Yellow */
            --hard-color: #e74c3c; /* Alizarin Red */
        }

        /* Base Styles */
        body {
            font-family: 'Roboto', Arial, sans-serif; /* Using Roboto for modern look */
            background: var(--light-gray);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            color: var(--text-dark);
            -webkit-text-size-adjust: 100%; /* Prevent text scaling on orientation change */
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        /* Credit Section */
        .credit {
            text-align: center;
            padding: 0.75rem;
            font-size: 0.9rem; /* Slightly smaller for mobile */
            background: var(--medium-gray);
            font-style: italic;
            color: var(--dark-blue);
        }
        .credit span {
            display: block;
            font-size: 0.8rem; /* Even smaller for secondary info */
            margin-top: 0.2rem;
        }

        /* Header */
        header {
            background: var(--primary-color);
            color: var(--white);
            padding: 1rem;
            text-align: center;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex; /* Use flexbox for better alignment */
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; /* Allow items to wrap on smaller screens */
        }
        header h1 {
            margin: 0;
            font-size: 1.4rem; /* Adjusted for mobile */
            font-weight: 700;
            flex-grow: 1; /* Allow title to take available space */
            text-align: center; /* Center align title */
            order: 1; /* Keep title in the middle visually */
            width: 100%; /* Take full width on small screens */
            padding-bottom: 0.5rem; /* Space below title if wrapped */
        }
        header .timer,
        header .scoreboard {
            position: static; /* Remove absolute positioning for mobile */
            transform: none;
            padding: 0.4rem 0.8rem;
            border-radius: 0.4rem;
            font-weight: bold;
            font-size: 0.95rem; /* Adjusted for mobile */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            margin: 0.2rem; /* Add some margin for spacing when wrapped */
        }
        header .timer {
            background: var(--secondary-color);
            order: 3; /* Position timer to the right */
        }
        header .scoreboard {
            background: var(--dark-blue);
            color: var(--white);
            order: 2; /* Position scoreboard to the left */
        }

        /* Controls Section */
        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 1.5rem 0.5rem; /* Reduced margins for mobile */
        }
        .btn-group {
            display: flex;
            justify-content: center;
            flex-wrap: wrap; /* Allow buttons to wrap */
            margin: 0.5rem 0;
            gap: 0.5rem; /* Reduced gap for tighter packing */
            width: 100%; /* Ensure groups take full width */
            padding: 0 0.5rem; /* Inner padding for alignment */
        }
        .btn {
            padding: 0.75rem 1.2rem; /* Reduced padding */
            border: none;
            border-radius: 1.25rem; /* Slightly less rounded for a cleaner look */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            cursor: pointer;
            font-size: 0.95rem; /* Adjusted for mobile */
            font-weight: bold;
            transition: transform 0.2s ease, box-shadow 0.2s ease, outline 0.2s ease;
            flex: 1 1 auto; /* Allow buttons to grow/shrink based on space */
            min-width: 120px; /* Minimum width before wrapping */
            max-width: 48%; /* Max width for two columns on wider mobile */
            text-align: center;
            box-sizing: border-box; /* Include padding/border in element's total width */
        }
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }
        .btn.selected {
            outline: 3px solid var(--dark-blue); /* Thinner outline for mobile */
            outline-offset: 2px;
            transform: scale(1.01);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        /* Category specific colors */
        .category-1 { background: var(--cat1-bg); color: var(--dark-blue); }
        .category-2 { background: var(--cat2-bg); color: var(--dark-blue); }
        .category-3 { background: var(--cat3-bg); color: var(--text-dark); }
        .category-4 { background: var(--cat4-bg); color: var(--dark-blue); }
        .category-5 { background: var(--cat5-bg); color: var(--dark-blue); }

        /* Level specific colors */
        .level-easy { background: var(--easy-color); color: var(--white); }
        .level-medium { background: var(--medium-color); color: var(--text-dark); }
        .level-hard { background: var(--hard-color); color: var(--white); }

        /* Quiz Container & Card */
        .quiz-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 50vh; /* Ensure card is visible */
            padding: 1rem;
        }
        .quiz-card {
            background: linear-gradient(180deg, var(--white), #f0f0f0);
            border-radius: 1rem; /* Standard border radius */
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            padding: 1.5rem; /* Reduced padding for mobile */
            max-width: 95%; /* Take almost full width on mobile */
            width: 100%;
            text-align: center;
            border: 1px solid #ddd;
            box-sizing: border-box; /* Include padding/border in total width */
        }
        .question {
            font-size: 1.3rem; /* Adjusted for mobile */
            margin-bottom: 1.5rem;
            font-weight: bold;
            color: var(--dark-blue);
        }
        .options {
            display: flex;
            flex-direction: column; /* Stack options vertically on mobile */
            gap: 0.75rem; /* Space between stacked options */
            margin-bottom: 1.5rem;
        }
        .option-btn {
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border: none;
            border-radius: 0.75rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease;
            width: 100%; /* Take full width when stacked */
            font-weight: 600;
        }
        .option-btn:hover {
            transform: translateY(-1px);
        }
        .true-btn { background: var(--easy-color); color: var(--white); }
        .false-btn { background: var(--hard-color); color: var(--white); }

        /* Feedback and Footer */
        .feedback {
            font-weight: bold;
            margin: 1rem 0;
            text-align: center;
            min-height: 24px; /* Ensure consistent height */
            font-size: 1.1rem;
            color: var(--dark-blue);
        }
        .footer {
            text-align: center;
            margin: 1.5rem 0;
            padding-bottom: 1.5rem;
        }

        /* Desktop Adjustments (larger screens) */
        @media (min-width: 768px) {
            header h1 {
                font-size: 1.8rem;
                width: auto; /* Revert width */
                padding-bottom: 0; /* Remove padding */
            }
            header .timer,
            header .scoreboard {
                position: absolute; /* Revert to absolute positioning */
                top: 1rem;
                transform: none;
                margin: 0;
                font-size: 1.1rem;
            }
            header .timer { right: 1rem; order: unset; }
            header .scoreboard { left: 1rem; order: unset; }

            .controls {
                margin: 2.5rem 1rem;
            }
            .btn-group {
                gap: 0.75rem;
                width: auto;
                padding: 0;
            }
            .btn {
                padding: 0.85rem 1.75rem;
                font-size: 1.05rem;
                min-width: 140px;
                max-width: unset; /* Remove max-width for desktop */
            }
            .quiz-container {
                min-height: 40vh;
                padding: 1.5rem;
            }
            .quiz-card {
                padding: 2.5rem;
                max-width: 650px;
            }
            .question {
                font-size: 1.5rem;
            }
            .options {
                flex-direction: row; /* Options side-by-side on desktop */
                gap: 1.25rem;
            }
            .option-btn {
                padding: 1rem 2rem;
                font-size: 1.1rem;
                min-width: 150px;
                width: auto; /* Revert width for side-by-side */
            }
            .feedback {
                margin: 1.5rem 0;
                font-size: 1.2rem;
            }
            .footer {
                margin: 2.5rem 0;
                padding-bottom: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="credit">
        Created by Panagiotis Domvros 2025 (CC BY-NC)
        <span>Διευθυντής 1ου Γυμνασίου Πυλαίας</span>
    </div>
    <header>
        <div class="scoreboard" id="scoreboard">Score: 0</div>
        <h1>History and a Day</h1>
        <div class="timer" id="timer">00"</div>
    </header>

    <main>
        <section class="controls" id="controls">
            <div class="btn-group categories">
                <button class="btn category-1" data-cat="1">🌟 Αρχαιότητα</button>
                <button class="btn category-2" data-cat="2">🏺 Ελληνιστικοί & Ρωμαϊκοί</button>
                <button class="btn category-3" data-cat="3">🏰 Βυζαντινοί Χρόνοι</button>
                <button class="btn category-4" data-cat="4">🛡️ Νεότεροι Χρόνοι</button>
                <button class="btn category-5" data-cat="5">🚀 Σύγχρονη Εποχή</button>
            </div>
            <div class="btn-group levels">
                <button class="btn level-easy" data-level="easy">😊 Εύκολο</button>
                <button class="btn level-medium" data-level="medium">😐 Μέτριο</button>
                <button class="btn level-hard" data-level="hard">😣 Δύσκολο</button>
            </div>
        </section>

        <section class="quiz-container">
            <div class="quiz-card" id="quiz-card" hidden>
                <div class="question" id="question-text"></div>
                <div class="options" id="options">
                    <button class="option-btn true-btn" data-opt="true">✅ Σωστό</button>
                    <button class="option-btn false-btn" data-opt="false">❌ Λάθος</button>
                </div>
                <div class="feedback" id="feedback"></div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <button id="restart-btn" class="btn level-medium hidden">Ξεκίνα ξανά 🎉</button>
    </footer>

    <script>
        const quizData = {
            "1": {
                "medium": [
                    { q: "Η Πρώτη Ολυμπιάδα πραγματοποιήθηκε το 776 π.Χ.", ans: "true", time: 10 },
                    { q: "Η Πρώτη Ολυμπιάδα πραγματοποιήθηκε το 777 π.Χ.", ans: "false", time: 10 }
                ],
                "easy": [
                    { q: "Η Μάχη του Μαραθώνα έγινε το 490 π.Χ.", ans: "true", time: 10 },
                    { q: "Η Μάχη του Μαραθώνα έγινε το 489 π.Χ.", ans: "false", time: 10 }
                ],
                "hard": [
                    // Add more hard questions here for category 1
                    { q: "Οι πρώτοι γραπτοί νόμοι στην Αθήνα, οι νόμοι του Δράκοντα, θεσπίστηκαν το 621 π.Χ.", ans: "true", time: 15 },
                    { q: "Οι νόμοι του Δράκοντα θεσπίστηκαν το 620 π.Χ.", ans: "false", time: 15 }
                ]
            },
            "2": {
                "easy": [
                    { q: "Ο Θάνατος του Μεγάλου Αλεξάνδρου έγινε το 323 π.Χ.", ans: "true", time: 10 },
                    { q: "Ο Θάνατος του Μεγάλου Αλεξάνδρου έγινε το 322 π.Χ.", ans: "false", time: 10 }
                ],
                "medium": [
                    { q: "Η ίδρυση Θεσσαλονίκης έγινε το 316 π.Χ.", ans: "true", time: 10 },
                    { q: "Η ίδρυση Θεσσαλονίκης έγινε το 317 π.Χ.", ans: "false", time: 10 }
                ],
                "hard": [
                    { q: "Η ίδρυση Αντιόχειας έγινε το 300 π.Χ.", ans: "true", time: 10 },
                    { q: "Η ίδρυση Αντιόχειας έγινε το 301 π.Χ.", ans: "false", time: 10 }
                ]
            },
            "3": {
                "easy": [
                    { q: "Η ανάληψη του Ιουστινιανού Α' έγινε το 527 μ.Χ.", ans: "true", time: 10 },
                    { q: "Η ανάληψη του Ιουστινιανού Α' έγινε το 528 μ.Χ.", ans: "false", time: 10 }
                ],
                "medium": [
                    { q: "Το τέλος της Δυτικής Ρωμαϊκής Αυτοκρατορίας έγινε το 476 μ.Χ.", ans: "true", time: 10 },
                    { q: "Το τέλος της Δυτικής Ρωμαϊκής Αυτοκρατορίας έγινε το 475 μ.Χ.", ans: "false", time: 10 }
                ],
                "hard": [
                    { q: "Η Άλωση Ρώμης από τους Βησιγότθους έγινε 23 Αυγούστου 410 μ.Χ.", ans: "true", time: 10 },
                    { q: "Η Άλωση Ρώμης από τους Βησιγότθους έγινε 24 Αυγούστου 410 μ.Χ.", ans: "false", time: 10 }
                ]
            },
            "4": {
                "easy": [
                    { q: "Η Ανακάλυψη της Αμερικής έγινε το 1492.", ans: "true", time: 10 },
                    { q: "Η Ανακάλυψη της Αμερικής έγινε το 1493.", ans: "false", time: 10 }
                ],
                "medium": [
                    { q: "Ο πρώτος περίπλους της Γης έγινε μεταξύ 1519–1522.", ans: "true", time: 10 },
                    { q: "Ο πρώτος περίπλους της Γης έγινε μεταξύ 1518–1521.", ans: "false", time: 10 }
                ],
                "hard": [
                    { q: "Οι Θέσεις του Μαρτίνου Λούθηρου στη Βιτεμβέργη έγιναν το 1517.", ans: "true", time: 10 },
                    { q: "Οι Θέσεις του Μαρτίνου Λούθηρου στη Βιτεμβέργη έγιναν το 1518.", ans: "false", time: 10 }
                ]
            },
            "5": {
                "easy": [
                    { q: "Η έναρξη της Ελληνικής Επανάστασης έγινε το 1821.", ans: "true", time: 10 },
                    { q: "Η έναρξη της Ελληνικής Επανάστασης έγινε το 1822.", ans: "false", time: 10 }
                ],
                "medium": [
                    { q: "Η Άλωση της Τριπολιτσάς έγινε 23 Σεπτεμβρίου 1821.", ans: "true", time: 10 },
                    { q: "Η Άλωση της Τριπολιτσάς έγινε 24 Σεπτεμβρίου 1821.", ans: "false", time: 10 }
                ],
                "hard": [
                    { q: "Η Ανατίναξη του 'Έσσεξ' έγινε 12 Σεπτεμβρίου 1821.", ans: "true", time: 10 },
                    { q: "Η Ανατίναξη του 'Έσσεξ' έγινε 13 Σεπτεμβρίου 1821.", ans: "false", time: 10 }
                ]
            }
        };

        // DOM Element Caching
        const timerEl = document.getElementById('timer');
        const boardEl = document.getElementById('scoreboard');
        const qText = document.getElementById('question-text');
        const feedbackEl = document.getElementById('feedback'); // Renamed for clarity
        const quizCard = document.getElementById('quiz-card'); // Renamed for clarity
        const controlsSection = document.getElementById('controls'); // Renamed for clarity
        const restartBtn = document.getElementById('restart-btn'); // Renamed for clarity
        const optionsContainer = document.getElementById('options'); // Renamed for clarity

        const categoryButtons = document.querySelectorAll('.categories .btn');
        const levelButtons = document.querySelectorAll('.levels .btn');
        const optionButtons = document.querySelectorAll('.option-btn');

        // Game State Variables
        let selectedCategory = null; // Renamed for clarity
        let selectedLevel = null;    // Renamed for clarity
        let currentQuestionIndex = 0; // Renamed for clarity
        let score = 0;
        let timerIntervalId = null; // Renamed for clarity
        let activeQuestion = null; // Renamed for clarity

        // Helper Function to remove 'selected' class
        function clearSelections(buttons) {
            buttons.forEach(button => button.classList.remove('selected'));
        }

        // Resets the quiz card display
        function resetQuizCardDisplay() {
            qText.textContent = '';
            feedbackEl.textContent = '';
            quizCard.classList.add('hidden'); // Use class for hiding
            clearInterval(timerIntervalId);
            timerEl.textContent = '00"';
        }

        // Shows the category/level selection controls
        function showControls() {
            controlsSection.classList.remove('hidden');
            resetQuizCardDisplay();
            restartBtn.classList.add('hidden'); // Hide restart button
            optionsContainer.classList.remove('hidden'); // Ensure options are visible
        }

        // Event Listeners for Category Buttons
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                clearSelections(categoryButtons);
                button.classList.add('selected');
                selectedCategory = button.dataset.cat;
                tryStartQuiz();
            });
        });

        // Event Listeners for Level Buttons
        levelButtons.forEach(button => {
            button.addEventListener('click', () => {
                clearSelections(levelButtons);
                button.classList.add('selected');
                selectedLevel = button.dataset.level;
                tryStartQuiz();
            });
        });

        // Checks if both category and level are selected to start quiz
        function tryStartQuiz() {
            if (selectedCategory && selectedLevel) {
                // Defensive check: ensure data exists
                if (!quizData[selectedCategory] || !quizData[selectedCategory][selectedLevel]) {
                    alert('Δεν υπάρχουν ερωτήσεις για αυτή την επιλογή. Παρακαλώ διαλέξτε άλλη κατηγορία/επίπεδο.');
                    // Reset selections if no questions found
                    selectedCategory = null;
                    selectedLevel = null;
                    clearSelections(categoryButtons);
                    clearSelections(levelButtons);
                    return;
                }
                // Shuffle questions for the selected category and level
                quizData[selectedCategory][selectedLevel].sort(() => Math.random() - 0.5);

                currentQuestionIndex = 0;
                score = 0;
                boardEl.textContent = 'Score: 0';
                controlsSection.classList.add('hidden');
                showQuestion();
            }
        }

        // Displays the current question
        function showQuestion() {
            if (!quizData[selectedCategory] || !quizData[selectedCategory][selectedLevel] || currentQuestionIndex >= quizData[selectedCategory][selectedLevel].length) {
                return endQuiz();
            }

            activeQuestion = quizData[selectedCategory][selectedLevel][currentQuestionIndex];
            qText.textContent = activeQuestion.q;
            feedbackEl.textContent = '';
            quizCard.classList.remove('hidden');
            startTimer(activeQuestion.time);
        }

        // Starts the question timer
        function startTimer(seconds) {
            clearInterval(timerIntervalId);
            let timeLeft = seconds;
            timerEl.textContent = timeLeft + '"';
            timerIntervalId = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft + '"';
                if (timeLeft <= 0) {
                    clearInterval(timerIntervalId);
                    handleAnswer(null); // No answer given (time ran out)
                }
            }, 1000);
        }

        // Handles user's answer
        function handleAnswer(selectedOption) {
            clearInterval(timerIntervalId);
            const correctAnswer = activeQuestion.ans;

            if (selectedOption === correctAnswer) {
                score += 10;
                feedbackEl.textContent = `Σωστά! ✅`;
                feedbackEl.style.color = varToHex('--easy-color'); // Green feedback
            } else {
                feedbackEl.textContent = `Λάθος! ❌ Η σωστή απάντηση ήταν: ${correctAnswer === 'true' ? 'Σωστό' : 'Λάθος'}`;
                feedbackEl.style.color = varToHex('--hard-color'); // Red feedback
            }

            boardEl.textContent = `Score: ${score}`;
            currentQuestionIndex++;

            // Wait a moment before moving to the next question or ending the quiz
            setTimeout(() => {
                resetQuizCardDisplay();
                if (currentQuestionIndex < quizData[selectedCategory][selectedLevel].length) {
                    showQuestion(); // Show next question
                } else {
                    endQuiz(); // Quiz finished
                }
            }, 1500); // 1.5 seconds feedback display
        }

        // Event Listeners for True/False buttons
        optionButtons.forEach(button => {
            button.addEventListener('click', () => handleAnswer(button.dataset.opt));
        });

        // Ends the quiz and displays final score
        function endQuiz() {
            quizCard.classList.remove('hidden'); // Ensure card is visible
            qText.textContent = `Το quiz τελείωσε! Το τελικό σου σκορ είναι: ${score}`;
            feedbackEl.textContent = '';
            optionsContainer.classList.add('hidden'); // Hide options
            restartBtn.classList.remove('hidden'); // Show restart button
            timerEl.textContent = '00"'; // Reset timer display
        }

        // Restart button functionality
        restartBtn.addEventListener('click', () => {
            selectedCategory = null;
            selectedLevel = null;
            currentQuestionIndex = 0;
            score = 0;
            boardEl.textContent = 'Score: 0';
            restartBtn.classList.add('hidden');
            clearSelections([...categoryButtons, ...levelButtons]); // Clear all button selections
            optionsContainer.classList.remove('hidden'); // Ensure options are visible for next round
            feedbackEl.style.color = varToHex('--dark-blue'); // Reset feedback color
            showControls(); // Go back to selection screen
        });

        // Initial state
        showControls();

        // Helper function to get computed CSS variable value (for JS color application)
        function varToHex(variable) {
            const style = getComputedStyle(document.documentElement);
            const color = style.getPropertyValue(variable).trim();
            return color;
        }
    </script>
</body>
</html>
